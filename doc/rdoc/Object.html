<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Object</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link"><a href="Object.html">Object</a></p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-anchor%3F">#anchor?</a></li>
					
					<li><a href="#method-i-area">#area</a></li>
					
					<li><a href="#method-i-cd">#cd</a></li>
					
					<li><a href="#method-i-cformat">#cformat</a></li>
					
					<li><a href="#method-i-change_relative_url">#change_relative_url</a></li>
					
					<li><a href="#method-i-classify">#classify</a></li>
					
					<li><a href="#method-i-config">#config</a></li>
					
					<li><a href="#method-i-config">#config</a></li>
					
					<li><a href="#method-i-contain_image%3F">#contain_image?</a></li>
					
					<li><a href="#method-i-contain_p%3F">#contain_p?</a></li>
					
					<li><a href="#method-i-container%3F">#container?</a></li>
					
					<li><a href="#method-i-content_container%3F">#content_container?</a></li>
					
					<li><a href="#method-i-count_reduce">#count_reduce</a></li>
					
					<li><a href="#method-i-count_visible">#count_visible</a></li>
					
					<li><a href="#method-i-create_absolute_url_from_base">#create_absolute_url_from_base</a></li>
					
					<li><a href="#method-i-create_absolute_url_from_context">#create_absolute_url_from_context</a></li>
					
					<li><a href="#method-i-crypt">#crypt</a></li>
					
					<li><a href="#method-i-detect_blocks">#detect_blocks</a></li>
					
					<li><a href="#method-i-detect_separators">#detect_separators</a></li>
					
					<li><a href="#method-i-escape_html">#escape_html</a></li>
					
					<li><a href="#method-i-f">#f</a></li>
					
					<li><a href="#method-i-find_separators">#find_separators</a></li>
					
					<li><a href="#method-i-fix_children_dimension">#fix_children_dimension</a></li>
					
					<li><a href="#method-i-fix_no_explicit_nodes">#fix_no_explicit_nodes</a></li>
					
					<li><a href="#method-i-footer">#footer</a></li>
					
					<li><a href="#method-i-get_domain">#get_domain</a></li>
					
					<li><a href="#method-i-get_new_composite_block">#get_new_composite_block</a></li>
					
					<li><a href="#method-i-has_children%3F">#has_children?</a></li>
					
					<li><a href="#method-i-help">#help</a></li>
					
					<li><a href="#method-i-help">#help</a></li>
					
					<li><a href="#method-i-help">#help</a></li>
					
					<li><a href="#method-i-help">#help</a></li>
					
					<li><a href="#method-i-hyperlink%3F">#hyperlink?</a></li>
					
					<li><a href="#method-i-image%3F">#image?</a></li>
					
					<li><a href="#method-i-image%3F">#image?</a></li>
					
					<li><a href="#method-i-inline%3F">#inline?</a></li>
					
					<li><a href="#method-i-invalid%3F">#invalid?</a></li>
					
					<li><a href="#method-i-is_image%3F">#is_image?</a></li>
					
					<li><a href="#method-i-line_break%3F">#line_break?</a></li>
					
					<li><a href="#method-i-link_text_len">#link_text_len</a></li>
					
					<li><a href="#method-i-load">#load</a></li>
					
					<li><a href="#method-i-make_absolute">#make_absolute</a></li>
					
					<li><a href="#method-i-malformed%3F">#malformed?</a></li>
					
					<li><a href="#method-i-mark_block">#mark_block</a></li>
					
					<li><a href="#method-i-mark_node">#mark_node</a></li>
					
					<li><a href="#method-i-normalize">#normalize</a></li>
					
					<li><a href="#method-i-normalize_DOM">#normalize_DOM</a></li>
					
					<li><a href="#method-i-parent_children_cleanup">#parent_children_cleanup</a></li>
					
					<li><a href="#method-i-partial_valid%3F">#partial_valid?</a></li>
					
					<li><a href="#method-i-process_node">#process_node</a></li>
					
					<li><a href="#method-i-relative%3F">#relative?</a></li>
					
					<li><a href="#method-i-relative_area">#relative_area</a></li>
					
					<li><a href="#method-i-remove_extra_paths">#remove_extra_paths</a></li>
					
					<li><a href="#method-i-remove_slash">#remove_slash</a></li>
					
					<li><a href="#method-i-remove_slash">#remove_slash</a></li>
					
					<li><a href="#method-i-rgb2hex">#rgb2hex</a></li>
					
					<li><a href="#method-i-save_image">#save_image</a></li>
					
					<li><a href="#method-i-sum_weights">#sum_weights</a></li>
					
					<li><a href="#method-i-tag_based_weight">#tag_based_weight</a></li>
					
					<li><a href="#method-i-text%3F">#text?</a></li>
					
					<li><a href="#method-i-text_len">#text_len</a></li>
					
					<li><a href="#method-i-to_xml">#to_xml</a></li>
					
					<li><a href="#method-i-undesirable_node%3F">#undesirable_node?</a></li>
					
					<li><a href="#method-i-urls_on_same_domain%3F">#urls_on_same_domain?</a></li>
					
					<li><a href="#method-i-usage">#usage</a></li>
					
					<li><a href="#method-i-usage">#usage</a></li>
					
					<li><a href="#method-i-usage">#usage</a></li>
					
					<li><a href="#method-i-usage">#usage</a></li>
					
					<li><a href="#method-i-valid%3F">#valid?</a></li>
					
					<li><a href="#method-i-verify_data_folder">#verify_data_folder</a></li>
					
					<li><a href="#method-i-verify_data_folder">#verify_data_folder</a></li>
					
					<li><a href="#method-i-verify_installation_of_marcalizer">#verify_installation_of_marcalizer</a></li>
					
					<li><a href="#method-i-version">#version</a></li>
					
					<li><a href="#method-i-virtual_text%3F">#virtual_text?</a></li>
					
					<li><a href="#method-i-visible%3F">#visible?</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./Action.html">Action</a></li>
				
					<li><a href="./Block.html">Block</a></li>
				
					<li><a href="./Body.html">Body</a></li>
				
					<li><a href="./CompositeBlock.html">CompositeBlock</a></li>
				
					<li><a href="./Container.html">Container</a></li>
				
					<li><a href="./Content.html">Content</a></li>
				
					<li><a href="./ContentContainer.html">ContentContainer</a></li>
				
					<li><a href="./ConvexHull.html">ConvexHull</a></li>
				
					<li><a href="./DefaultDivide.html">DefaultDivide</a></li>
				
					<li><a href="./DefaultExtract.html">DefaultExtract</a></li>
				
					<li><a href="./Dimension.html">Dimension</a></li>
				
					<li><a href="./Driver.html">Driver</a></li>
				
					<li><a href="./Heuristic.html">Heuristic</a></li>
				
					<li><a href="./Image.html">Image</a></li>
				
					<li><a href="./IndirectContainer.html">IndirectContainer</a></li>
				
					<li><a href="./Invalids.html">Invalids</a></li>
				
					<li><a href="./LayoutContainer.html">LayoutContainer</a></li>
				
					<li><a href="./Object.html">Object</a></li>
				
					<li><a href="./OneChild.html">OneChild</a></li>
				
					<li><a href="./Point.html">Point</a></li>
				
					<li><a href="./Separator.html">Separator</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Object</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="anchor--method" class="method-detail ">
				<a name="method-i-anchor%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">anchor?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="anchor--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 136</span>
136: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">anchor?</span>(<span class="ruby-identifier">node</span>)
137:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
138:                 <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'a'</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">node</span>[<span class="ruby-value str">'href'</span>].<span class="ruby-identifier">nil?</span>)
139:         <span class="ruby-keyword kw">else</span>
140:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
141:         <span class="ruby-keyword kw">end</span>
142: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="area-method" class="method-detail ">
				<a name="method-i-area"></a>

				<div class="method-heading">
				
					<span class="method-name">area</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="area-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 241</span>
241: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">area</span>(<span class="ruby-identifier">node</span>)
242:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span> <span class="ruby-identifier">node</span>
243:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span> <span class="ruby-identifier">node</span>
244:                         <span class="ruby-identifier">b</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">node</span>[<span class="ruby-value str">'left'</span>].<span class="ruby-identifier">to_f</span>
245:                         <span class="ruby-identifier">h</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">node</span>[<span class="ruby-value str">'top'</span>].<span class="ruby-identifier">to_f</span>
246:                         <span class="ruby-comment cmt">#puts &quot;compute de area of #{node.xpath} (#{node['left']},#{node['top']},#{node['width']},#{node['height']}) b=#{b}, h=#{h} b*h=#{b*h}px^2&quot; if ['93','94'].include? node['uid']</span>
247:                         <span class="ruby-keyword kw">return</span>(<span class="ruby-identifier">b</span> * <span class="ruby-identifier">h</span>)
248:                 <span class="ruby-keyword kw">else</span>
249:                         <span class="ruby-keyword kw">return</span>(<span class="ruby-identifier">area</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>))
250:                 <span class="ruby-keyword kw">end</span>
251:         <span class="ruby-keyword kw">else</span>
252:                 <span class="ruby-keyword kw">return</span>(<span class="ruby-value">0</span>)
253:         <span class="ruby-keyword kw">end</span>
254: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="cd-method" class="method-detail ">
				<a name="method-i-cd"></a>

				<div class="method-heading">
				
					<span class="method-name">cd</span><span
						class="method-args">(url1,url2,b1,b2,t)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="cd-source">
<pre>
   <span class="ruby-comment cmt"># File test/test.rb, line 1</span>
1: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cd</span>(<span class="ruby-identifier">url1</span>,<span class="ruby-identifier">url2</span>,<span class="ruby-identifier">b1</span>,<span class="ruby-identifier">b2</span>,<span class="ruby-identifier">t</span>)
2:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b1</span><span class="ruby-operator">==</span><span class="ruby-identifier">b2</span>
3:                 <span class="ruby-keyword kw">return</span> [<span class="ruby-node">&quot;/usr/bin/change_detection.rb --url1=#{url1} --url2=#{url2} --browser=#{b1} --doc=6 --type=#{t}&quot;</span>,<span class="ruby-identifier">url1</span>,<span class="ruby-identifier">url2</span>,<span class="ruby-identifier">b1</span>,<span class="ruby-identifier">b2</span>,<span class="ruby-identifier">t</span>]
4:         <span class="ruby-keyword kw">else</span>
5:                 <span class="ruby-keyword kw">return</span> [<span class="ruby-node">&quot;/usr/bin/change_detection.rb --url1=#{url1} --url2=#{url2} --browser1=#{b1} --doc=6 --browser2=#{b2} --type=#{t}&quot;</span>,<span class="ruby-identifier">url1</span>,<span class="ruby-identifier">url2</span>,<span class="ruby-identifier">b1</span>,<span class="ruby-identifier">b2</span>,<span class="ruby-identifier">t</span>]
6:         <span class="ruby-keyword kw">end</span>
7: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="cformat-method" class="method-detail ">
				<a name="method-i-cformat"></a>

				<div class="method-heading">
				
					<span class="method-name">cformat</span><span
						class="method-args">(number)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="cformat-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 218</span>
218: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cformat</span>(<span class="ruby-identifier">number</span>)
219:         <span class="ruby-value str">&quot;%05.4f&quot;</span><span class="ruby-operator">%</span><span class="ruby-identifier">number</span>.<span class="ruby-identifier">to_f</span>
220: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="change-relative-url-method" class="method-detail ">
				<a name="method-i-change_relative_url"></a>

				<div class="method-heading">
				
					<span class="method-name">change_relative_url</span><span
						class="method-args">(element)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="change-relative-url-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 337</span>
337: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change_relative_url</span>(<span class="ruby-identifier">element</span>)
338:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">element</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">element</span>)
339:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>[<span class="ruby-value">:href</span>].<span class="ruby-identifier">nil?</span>
340:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">relative?</span> <span class="ruby-identifier">element</span>[<span class="ruby-value">:href</span>]
341:                                 <span class="ruby-identifier">element</span>[<span class="ruby-value">:href</span>] = <span class="ruby-identifier">make_absolute</span>(<span class="ruby-identifier">$document</span>.<span class="ruby-identifier">url</span>,<span class="ruby-identifier">element</span>[<span class="ruby-value">:href</span>])
342:                         <span class="ruby-keyword kw">end</span>
343:                 <span class="ruby-keyword kw">end</span>
344:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>[<span class="ruby-value">:src</span>].<span class="ruby-identifier">nil?</span>
345:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">relative?</span> <span class="ruby-identifier">element</span>[<span class="ruby-value">:src</span>]
346:                                 <span class="ruby-identifier">element</span>[<span class="ruby-value">:src</span>] = <span class="ruby-identifier">make_absolute</span>(<span class="ruby-identifier">$document</span>.<span class="ruby-identifier">url</span>,<span class="ruby-identifier">element</span>[<span class="ruby-value">:src</span>])
347:                         <span class="ruby-keyword kw">end</span>
348:                 <span class="ruby-keyword kw">end</span>
349:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
350:                         <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
351:                                 <span class="ruby-identifier">change_relative_url</span>(<span class="ruby-identifier">child</span>)
352:                         <span class="ruby-keyword kw">end</span>
353:                 <span class="ruby-keyword kw">end</span>
354:         <span class="ruby-keyword kw">end</span>
355: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="classify-method" class="method-detail ">
				<a name="method-i-classify"></a>

				<div class="method-heading">
				
					<span class="method-name">classify</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="classify-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 276</span>
276: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">classify</span>(<span class="ruby-identifier">node</span>)
277:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text?</span> <span class="ruby-identifier">node</span>
278:                 <span class="ruby-value str">&quot;TEXT&quot;</span>
279:         <span class="ruby-keyword kw">elsif</span> [<span class="ruby-value str">'h1'</span>,<span class="ruby-value str">'h2'</span>,<span class="ruby-value str">'h3'</span>,<span class="ruby-value str">'h4'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span>
280:                 <span class="ruby-value str">'TITLE'</span>
281:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'img'</span>
282:                 <span class="ruby-value str">'IMG'</span>
283:         <span class="ruby-keyword kw">else</span>
284:                 <span class="ruby-value str">&quot;COMBINED&quot;</span>
285:         <span class="ruby-keyword kw">end</span>
286: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="config-method" class="method-detail ">
				<a name="method-i-config"></a>

				<div class="method-heading">
				
					<span class="method-name">config</span><span
						class="method-args">(key)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="config-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 68</span>
68: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">config</span>(<span class="ruby-identifier">key</span>)
69:         <span class="ruby-identifier">conf</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-value str">'/etc/pagelyzer.conf'</span>,<span class="ruby-value str">'r'</span>)
70:         <span class="ruby-identifier">value</span> = <span class="ruby-value str">&quot;&quot;</span>
71:         <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
72:                 <span class="ruby-identifier">pair</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)
73:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pair</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">strip</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span>
74:                         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pair</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">strip</span>
75:                         <span class="ruby-keyword kw">break</span>
76:                 <span class="ruby-keyword kw">end</span>
77:         <span class="ruby-keyword kw">end</span>
78:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">value</span>
79: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="config-method" class="method-detail ">
				<a name="method-i-config"></a>

				<div class="method-heading">
				
					<span class="method-name">config</span><span
						class="method-args">(key)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="config-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 57</span>
57: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">config</span>(<span class="ruby-identifier">key</span>)
58:         <span class="ruby-identifier">conf</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-value str">'/etc/pagelyzer.conf'</span>,<span class="ruby-value str">'r'</span>)
59:         <span class="ruby-identifier">value</span> = <span class="ruby-value str">&quot;&quot;</span>
60:         <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
61:                 <span class="ruby-identifier">pair</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)
62:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pair</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">strip</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span>
63:                         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">pair</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">strip</span>
64:                         <span class="ruby-keyword kw">break</span>
65:                 <span class="ruby-keyword kw">end</span>
66:         <span class="ruby-keyword kw">end</span>
67:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">value</span>
68: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="contain-image--method" class="method-detail ">
				<a name="method-i-contain_image%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">contain_image?</span><span
						class="method-args">(node,level=0)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="contain-image--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 384</span>
384: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">contain_image?</span>(<span class="ruby-identifier">node</span>,<span class="ruby-identifier">level</span>=<span class="ruby-value">0</span>)
385:         <span class="ruby-identifier">ic</span> = []
386:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
387:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
388:                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
389:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">is_image?</span>(<span class="ruby-identifier">child</span>)
390:                                         <span class="ruby-identifier">ic</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">level</span>
391:                                 <span class="ruby-keyword kw">end</span>
392:                                 <span class="ruby-identifier">ic</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">contain_image?</span>(<span class="ruby-identifier">child</span>,<span class="ruby-identifier">level</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
393:                         <span class="ruby-keyword kw">end</span>
394:                 <span class="ruby-keyword kw">end</span>
395:         <span class="ruby-keyword kw">end</span>
396:         <span class="ruby-identifier">ic</span>.<span class="ruby-identifier">flatten</span>
397: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="contain-p--method" class="method-detail ">
				<a name="method-i-contain_p%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">contain_p?</span><span
						class="method-args">(node,level=0)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="contain-p--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 403</span>
403: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">contain_p?</span>(<span class="ruby-identifier">node</span>,<span class="ruby-identifier">level</span>=<span class="ruby-value">0</span>)
404:         <span class="ruby-identifier">pc</span> = []
405:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
406:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
407:                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
408:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'p'</span>
409:                                         <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">level</span>
410:                                 <span class="ruby-keyword kw">end</span>
411:                                 <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">contain_p?</span>(<span class="ruby-identifier">child</span>,<span class="ruby-identifier">level</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
412:                         <span class="ruby-keyword kw">end</span>
413:                 <span class="ruby-keyword kw">end</span>
414:         <span class="ruby-keyword kw">end</span>
415:         <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">flatten</span>
416: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="container--method" class="method-detail ">
				<a name="method-i-container%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">container?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="container--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 160</span>
160: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">container?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-comment cmt">#the tag</span>
161:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
162:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
163:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
164:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
165:         <span class="ruby-keyword kw">else</span>
166:                 <span class="ruby-keyword kw">return</span> [<span class="ruby-value str">'DIV'</span>,<span class="ruby-value str">'TABLE'</span>,<span class="ruby-value str">'TR'</span>,<span class="ruby-value str">'BODY'</span>,<span class="ruby-value str">'IFRAME'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
167:         <span class="ruby-keyword kw">end</span>
168: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="content-container--method" class="method-detail ">
				<a name="method-i-content_container%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">content_container?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="content-container--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 156</span>
156: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">content_container?</span>(<span class="ruby-identifier">node</span>)
157:         [<span class="ruby-value str">'DL'</span>,<span class="ruby-value str">'UL'</span>,<span class="ruby-value str">'P'</span>,<span class="ruby-value str">'H1'</span>,<span class="ruby-value str">'H2'</span>,<span class="ruby-value str">'TD'</span>,<span class="ruby-value str">'FORM'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
158: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="count-reduce-method" class="method-detail ">
				<a name="method-i-count_reduce"></a>

				<div class="method-heading">
				
					<span class="method-name">count_reduce</span><span
						class="method-args">(collection,function_name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="count-reduce-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 228</span>
228: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_reduce</span>(<span class="ruby-identifier">collection</span>,<span class="ruby-identifier">function_name</span>)
229:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">nil?</span>
230:                 <span class="ruby-identifier">r</span>=<span class="ruby-value">0</span>
231:                 <span class="ruby-comment cmt">#r = collection.reduce(0) {|count,element| send(function_name,element) ? (count+1) : 0}</span>
232:                 <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
233:                         <span class="ruby-identifier">r</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">send</span>(<span class="ruby-identifier">function_name</span>,<span class="ruby-identifier">element</span>)
234:                 <span class="ruby-keyword kw">end</span>
235:                 <span class="ruby-comment cmt">#puts &quot;counting #{function_name} for #{collection.collect{|x|x.name}} = #{r}&quot;</span>
236:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">r</span>
237:         <span class="ruby-keyword kw">else</span>
238:                 <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span>
239:         <span class="ruby-keyword kw">end</span>
240: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="count-visible-method" class="method-detail ">
				<a name="method-i-count_visible"></a>

				<div class="method-heading">
				
					<span class="method-name">count_visible</span><span
						class="method-args">(group)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="count-visible-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 131</span>
131: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">count_visible</span>(<span class="ruby-identifier">group</span>)
132:         <span class="ruby-identifier">group</span>.<span class="ruby-identifier">reduce</span>(<span class="ruby-value">0</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">count</span>,<span class="ruby-identifier">element</span><span class="ruby-operator">|</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">element</span>) <span class="ruby-operator">?</span> (<span class="ruby-identifier">count</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>) <span class="ruby-operator">:</span> <span class="ruby-value">0</span>}
133: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-absolute-url-from-base-method" class="method-detail ">
				<a name="method-i-create_absolute_url_from_base"></a>

				<div class="method-heading">
				
					<span class="method-name">create_absolute_url_from_base</span><span
						class="method-args">(potential_base, relative_url)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="create-absolute-url-from-base-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_absolute_url_from_base</span>(<span class="ruby-identifier">potential_base</span>, <span class="ruby-identifier">relative_url</span>)
58:     <span class="ruby-identifier">naked_base</span> = <span class="ruby-identifier">remove_extra_paths</span>(<span class="ruby-identifier">potential_base</span>)
59:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">naked_base</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">relative_url</span>
60:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-absolute-url-from-context-method" class="method-detail ">
				<a name="method-i-create_absolute_url_from_context"></a>

				<div class="method-heading">
				
					<span class="method-name">create_absolute_url_from_context</span><span
						class="method-args">(potential_base, relative_url)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="create-absolute-url-from-context-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 71</span>
71:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_absolute_url_from_context</span>(<span class="ruby-identifier">potential_base</span>, <span class="ruby-identifier">relative_url</span>)
72:     <span class="ruby-identifier">absolute_url</span> = <span class="ruby-keyword kw">nil</span>;
73:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">potential_base</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/\/$/</span>)
74:       <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">potential_base</span><span class="ruby-operator">+</span><span class="ruby-identifier">relative_url</span>
75:     <span class="ruby-keyword kw">else</span>
76:       <span class="ruby-identifier">last_index_of_slash</span> = <span class="ruby-identifier">potential_base</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-value str">'/'</span>)
77:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">potential_base</span>[<span class="ruby-identifier">last_index_of_slash</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">':/'</span>
78:         <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">potential_base</span><span class="ruby-operator">+</span><span class="ruby-value str">'/'</span><span class="ruby-operator">+</span><span class="ruby-identifier">relative_url</span>
79:       <span class="ruby-keyword kw">else</span>
80:         <span class="ruby-identifier">last_index_of_dot</span> = <span class="ruby-identifier">potential_base</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-value str">'.'</span>)
81:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">last_index_of_dot</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">last_index_of_slash</span>
82:           <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">potential_base</span><span class="ruby-operator">+</span><span class="ruby-value str">'/'</span><span class="ruby-operator">+</span><span class="ruby-identifier">relative_url</span>
83:         <span class="ruby-keyword kw">else</span>
84:           <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">potential_base</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">last_index_of_slash</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">relative_url</span>
85:         <span class="ruby-keyword kw">end</span>
86:       <span class="ruby-keyword kw">end</span>
87:     <span class="ruby-keyword kw">end</span>
88:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">absolute_url</span>
89:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="crypt-method" class="method-detail ">
				<a name="method-i-crypt"></a>

				<div class="method-heading">
				
					<span class="method-name">crypt</span><span
						class="method-args">(txt)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="crypt-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 380</span>
380: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">crypt</span>(<span class="ruby-identifier">txt</span>)
381: <span class="ruby-constant">Digest</span><span class="ruby-operator">::</span><span class="ruby-constant">MD5</span>.<span class="ruby-identifier">hexdigest</span>(<span class="ruby-identifier">txt</span>)
382: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="detect-blocks-method" class="method-detail ">
				<a name="method-i-detect_blocks"></a>

				<div class="method-heading">
				
					<span class="method-name">detect_blocks</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="detect-blocks-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 96</span>
 96: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">detect_blocks</span>(<span class="ruby-identifier">node</span>)
 97: <span class="ruby-identifier">current_block</span> = <span class="ruby-keyword kw">nil</span>
 98: <span class="ruby-identifier">sub_block_list</span> = []
 99:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">undesirable_node?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">node</span>)
100:                 <span class="ruby-identifier">heuristic</span> = <span class="ruby-identifier">process_node</span>(<span class="ruby-identifier">node</span>)
101:                 <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">heuristic</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">heuristic</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">rec</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'extract'</span>
102:                         <span class="ruby-identifier">current_block</span> = <span class="ruby-constant">Block</span>.<span class="ruby-identifier">new</span> 
103:                         <span class="ruby-identifier">current_block</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">$block_count</span>
104:                         <span class="ruby-identifier">$block_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
105:                         <span class="ruby-identifier">current_block</span>.<span class="ruby-identifier">add_candidate</span> [<span class="ruby-identifier">node</span>],<span class="ruby-identifier">heuristic</span>
106:                         <span class="ruby-identifier">current_block</span>.<span class="ruby-identifier">process_path</span>
107:                         <span class="ruby-comment cmt">#TODO: verify if there are nodes that do not corresponds to a sub-block IMPLICIT BLOCKS</span>
108:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_block</span>.<span class="ruby-identifier">doc</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">$pdoc</span> 
109:                                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span> 
110:                                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
111:                                                 <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">detect_blocks</span>(<span class="ruby-identifier">e</span>)
112:                                         <span class="ruby-keyword kw">end</span>
113:                                         <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">flatten!</span>
114:                                         <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">nil</span>)
115:                                         <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">current_block</span>.<span class="ruby-identifier">add_child</span> <span class="ruby-identifier">b</span>}
116:                                 <span class="ruby-keyword kw">end</span>
117:                         <span class="ruby-keyword kw">end</span>
118:                 <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">heuristic</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">heuristic</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">rec</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'divide'</span>
119:                         <span class="ruby-comment cmt">#divide</span>
120:                         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span> 
121:                                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
122:                                                 <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">detect_blocks</span>(<span class="ruby-identifier">e</span>)
123:                                         <span class="ruby-keyword kw">end</span>
124:                                         <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">flatten!</span>
125:                                         <span class="ruby-identifier">sub_block_list</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">nil</span>)
126:                                 <span class="ruby-keyword kw">end</span>
127:                         <span class="ruby-identifier">current_block</span> = <span class="ruby-identifier">sub_block_list</span>
128:                 <span class="ruby-keyword kw">else</span>
129:                         <span class="ruby-identifier">current_block</span> = <span class="ruby-identifier">sub_block_list</span>
130:                 <span class="ruby-keyword kw">end</span>
131:         <span class="ruby-keyword kw">end</span>
132: <span class="ruby-identifier">current_block</span>
133: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="detect-separators-method" class="method-detail ">
				<a name="method-i-detect_separators"></a>

				<div class="method-heading">
				
					<span class="method-name">detect_separators</span><span
						class="method-args">(block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="detect-separators-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 135</span>
135: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">detect_separators</span>(<span class="ruby-identifier">block</span>)
136:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
137:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
138:                         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span>,<span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
139:                                 <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">detect_separators</span>(<span class="ruby-identifier">child</span>)
140:                         <span class="ruby-keyword kw">end</span>
141:                 <span class="ruby-keyword kw">end</span>
142:         <span class="ruby-keyword kw">end</span>
143:         <span class="ruby-identifier">block</span> = <span class="ruby-identifier">find_separators</span>(<span class="ruby-identifier">block</span>,<span class="ruby-value">:horizontal</span>)
144:         <span class="ruby-identifier">block</span> = <span class="ruby-identifier">find_separators</span>(<span class="ruby-identifier">block</span>,<span class="ruby-value">:vertical</span>)
145: <span class="ruby-identifier">block</span>
146: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="escape-html-method" class="method-detail ">
				<a name="method-i-escape_html"></a>

				<div class="method-heading">
				
					<span class="method-name">escape_html</span><span
						class="method-args">(src='')</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="escape-html-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 372</span>
372: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">escape_html</span>(<span class="ruby-identifier">src</span>=<span class="ruby-value str">''</span>)
373: <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">src</span>.<span class="ruby-identifier">nil?</span>
374:         <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span>
375: <span class="ruby-keyword kw">else</span>
376:         <span class="ruby-keyword kw">return</span> <span class="ruby-constant">CGI</span><span class="ruby-operator">::</span><span class="ruby-identifier">escapeHTML</span>(<span class="ruby-identifier">src</span>) 
377: <span class="ruby-keyword kw">end</span>
378: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="f-method" class="method-detail ">
				<a name="method-i-f"></a>

				<div class="method-heading">
				
					<span class="method-name">f</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="f-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 256</span>
256: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">f</span>(<span class="ruby-identifier">node</span>)
257: <span class="ruby-identifier">na</span> = <span class="ruby-identifier">area</span>(<span class="ruby-identifier">node</span>)
258: <span class="ruby-identifier">pa</span> = <span class="ruby-identifier">area</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>)
259: <span class="ruby-identifier">w</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value str">'weight'</span>].<span class="ruby-identifier">to_f</span>
260: <span class="ruby-identifier">level</span> = <span class="ruby-identifier">node</span>[<span class="ruby-value str">'level'</span>].<span class="ruby-identifier">to_i</span>
261: <span class="ruby-identifier">da</span> = <span class="ruby-value">0</span>
262: <span class="ruby-identifier">da</span> = <span class="ruby-identifier">na</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">pa</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pa</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
263: <span class="ruby-comment cmt">#(da+w) / (2*(level+1))</span>
264: <span class="ruby-identifier">w</span>
265: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="find-separators-method" class="method-detail ">
				<a name="method-i-find_separators"></a>

				<div class="method-heading">
				
					<span class="method-name">find_separators</span><span
						class="method-args">(block,mode)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="find-separators-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 148</span>
148: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_separators</span>(<span class="ruby-identifier">block</span>,<span class="ruby-identifier">mode</span>)
149:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:horizontal</span>
150:                 <span class="ruby-identifier">block_sp</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">min_y</span>
151:                 <span class="ruby-identifier">block_ep</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">max_y</span>
152:         <span class="ruby-keyword kw">else</span>
153:                 <span class="ruby-identifier">block_sp</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">min_x</span>
154:                 <span class="ruby-identifier">block_ep</span> = <span class="ruby-identifier">block</span>.<span class="ruby-identifier">max_x</span>
155:         <span class="ruby-keyword kw">end</span>
156:         <span class="ruby-identifier">sep</span> = [<span class="ruby-constant">Separator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">block_sp</span>,<span class="ruby-identifier">block_ep</span>)] 
157:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
158:                 <span class="ruby-identifier">i</span>=<span class="ruby-value">1</span>
159:                 <span class="ruby-identifier">block</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
160:                         <span class="ruby-identifier">child</span>.<span class="ruby-identifier">process_path</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">path!</span>=[]
161:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span><span class="ruby-operator">==</span><span class="ruby-value">:horizontal</span>
162:                                 <span class="ruby-identifier">child_sp</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">min_y</span>
163:                                 <span class="ruby-identifier">child_ep</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">max_y</span> 
164:                         <span class="ruby-keyword kw">else</span>
165:                                 <span class="ruby-identifier">child_sp</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">min_x</span>
166:                                 <span class="ruby-identifier">child_ep</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">max_x</span> 
167:                         <span class="ruby-keyword kw">end</span>
168:                         <span class="ruby-identifier">to_add</span> = []
169:                         <span class="ruby-identifier">to_del</span> = []
170:                         <span class="ruby-identifier">ns</span>=<span class="ruby-identifier">sep</span>.<span class="ruby-identifier">size</span>
171:                         <span class="ruby-identifier">k</span>=<span class="ruby-value">0</span>
172:                         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">k</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">ns</span>
173:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">contains?</span> <span class="ruby-identifier">child</span>,<span class="ruby-identifier">mode</span>
174:                                         <span class="ruby-identifier">aux</span> =<span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">ep</span>
175:                                         <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">ep</span> = <span class="ruby-identifier">child_sp</span>
176:                                         <span class="ruby-identifier">sep</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-identifier">k</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>,<span class="ruby-constant">Separator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">child_ep</span>,<span class="ruby-identifier">aux</span>))
177:                                         <span class="ruby-identifier">k</span>=<span class="ruby-identifier">k</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
178:                                         <span class="ruby-identifier">ns</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
179:                                 <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">covered_by?</span> <span class="ruby-identifier">child</span>,<span class="ruby-identifier">mode</span>
180:                                         <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>]=<span class="ruby-keyword kw">nil</span>
181:                                         <span class="ruby-identifier">sep</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-keyword kw">nil</span>)
182:                                         <span class="ruby-identifier">k</span>=<span class="ruby-identifier">k</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>
183:                                         <span class="ruby-identifier">ns</span><span class="ruby-operator">-=</span><span class="ruby-value">1</span>
184:                                 <span class="ruby-keyword kw">else</span>
185:                                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">top_crossed_by?</span> <span class="ruby-identifier">child</span>,<span class="ruby-identifier">mode</span>
186:                                                 <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">sp</span> = <span class="ruby-identifier">child_ep</span>
187:                                         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">bottom_crossed_by?</span> <span class="ruby-identifier">child</span>,<span class="ruby-identifier">mode</span>
188:                                                 <span class="ruby-identifier">sep</span>[<span class="ruby-identifier">k</span>].<span class="ruby-identifier">ep</span> = <span class="ruby-identifier">child_sp</span>
189:                                         <span class="ruby-keyword kw">end</span>
190:                                 <span class="ruby-keyword kw">end</span>
191:                                 <span class="ruby-identifier">k</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
192:                         <span class="ruby-keyword kw">end</span>
193: 
194:                 <span class="ruby-keyword kw">end</span>
195:                 <span class="ruby-identifier">sep</span> = <span class="ruby-identifier">sep</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span>]
196:                 <span class="ruby-identifier">sep</span> = [] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sep</span>.<span class="ruby-identifier">nil?</span>
197:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:horizontal</span>
198:                         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">hsep</span> = <span class="ruby-identifier">sep</span>
199:                 <span class="ruby-keyword kw">else</span>
200:                         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">vsep</span> = <span class="ruby-identifier">sep</span>
201:                 <span class="ruby-keyword kw">end</span>
202:         <span class="ruby-keyword kw">end</span>
203:         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">vsep</span> = <span class="ruby-identifier">sep</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:vertical</span>
204:         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">hsep</span> = <span class="ruby-identifier">sep</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:horizontal</span>
205: <span class="ruby-identifier">block</span>
206: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="fix-children-dimension-method" class="method-detail ">
				<a name="method-i-fix_children_dimension"></a>

				<div class="method-heading">
				
					<span class="method-name">fix_children_dimension</span><span
						class="method-args">(element)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="fix-children-dimension-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 288</span>
288: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fix_children_dimension</span>(<span class="ruby-identifier">element</span>)
289:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">element</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">element</span>)
290:                 <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
291:                         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">c</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">c</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid?</span>(<span class="ruby-identifier">c</span>)
292:                                 <span class="ruby-identifier">fix_children_dimension</span>(<span class="ruby-identifier">c</span>)
293:                                 <span class="ruby-comment cmt">#puts &quot;verify element #{c.name} (#{c['id']})&quot;</span>
294:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'left'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">element</span>[<span class="ruby-value str">'left'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'left'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&lt;</span><span class="ruby-value">0</span>
295:                                         <span class="ruby-comment cmt">#puts &quot;#{c.name}(#{c['id']}):#{c['left']} is far at left than #{element.name}(#{element['uid']}):#{element['left']}&quot;</span>
296:                                         <span class="ruby-identifier">element</span>[<span class="ruby-value str">'left'</span>] = <span class="ruby-identifier">c</span>[<span class="ruby-value str">'left'</span>]
297:                                 <span class="ruby-keyword kw">end</span>
298:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'top'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">element</span>[<span class="ruby-value str">'top'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'top'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&lt;</span><span class="ruby-value">0</span>
299:                                         <span class="ruby-comment cmt">#puts &quot;#{c.name}(#{c['id']}):#{c['top']} is far at right than #{element.name}(#{element['uid']}):#{element['top']}&quot;</span>
300:                                         <span class="ruby-identifier">element</span>[<span class="ruby-value str">'top'</span>] = <span class="ruby-identifier">c</span>[<span class="ruby-value str">'top'</span>]
301:                                 <span class="ruby-keyword kw">end</span>
302:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">element</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_f</span>
303:                                         <span class="ruby-comment cmt">#puts &quot;#{c.name}(#{c['id']}):#{c['width']} is wider than #{element.name}(#{element['uid']}):#{element['width']}&quot;</span>
304:                                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">width</span>
305:                                                 <span class="ruby-identifier">c</span>[<span class="ruby-value str">'width'</span>] = <span class="ruby-identifier">element</span>[<span class="ruby-value str">'width'</span>]
306:                                         <span class="ruby-keyword kw">else</span>
307:                                                 <span class="ruby-identifier">element</span>[<span class="ruby-value str">'width'</span>] = <span class="ruby-identifier">c</span>[<span class="ruby-value str">'width'</span>] 
308:                                         <span class="ruby-keyword kw">end</span>
309:                                 <span class="ruby-keyword kw">end</span>
310:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">element</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span><span class="ruby-operator">&lt;</span><span class="ruby-value">0</span>
311:                                         <span class="ruby-comment cmt">#puts &quot;#{c.name}(#{c['id']}):#{c['height']} is higher than #{element.name}(#{element['uid']}):#{element['height']}&quot;</span>
312:                                         <span class="ruby-identifier">element</span>[<span class="ruby-value str">'height'</span>] = <span class="ruby-identifier">c</span>[<span class="ruby-value str">'height'</span>]
313:                                 <span class="ruby-keyword kw">end</span>
314:                         <span class="ruby-keyword kw">end</span>
315:                 <span class="ruby-keyword kw">end</span>
316:         <span class="ruby-keyword kw">end</span>
317: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="fix-no-explicit-nodes-method" class="method-detail ">
				<a name="method-i-fix_no_explicit_nodes"></a>

				<div class="method-heading">
				
					<span class="method-name">fix_no_explicit_nodes</span><span
						class="method-args">(element)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
example: <div style=&#8217;background-image: aaa.jpg&#8217;> becomes
<div><img src=&#8217;aaa.jpg&#8217;></div>
</p>
					

					
					<div class="method-source-code"
						id="fix-no-explicit-nodes-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 320</span>
320: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fix_no_explicit_nodes</span>(<span class="ruby-identifier">element</span>)
321:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">element</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">element</span>)
322:                 <span class="ruby-comment cmt">#puts &quot;verificando #{element.name} #{element['style']}&quot;</span>
323:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>[<span class="ruby-value str">'style'</span>].<span class="ruby-identifier">nil?</span>
324:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">element</span>[<span class="ruby-value str">'style'</span>].<span class="ruby-identifier">strip</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">16</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'background-image:'</span>
325:                                 <span class="ruby-identifier">iu</span> = <span class="ruby-identifier">element</span>[<span class="ruby-value str">'style'</span>].<span class="ruby-identifier">strip</span>[<span class="ruby-value">17</span><span class="ruby-operator">..</span><span class="ruby-identifier">element</span>[<span class="ruby-value str">'style'</span>].<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">size</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'url'</span>,<span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'('</span>,<span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">')'</span>,<span class="ruby-value str">''</span>)
326:                                 <span class="ruby-identifier">element</span>.<span class="ruby-identifier">inner_html</span> = <span class="ruby-node">&quot;&lt;IMG src='#{iu}' uid='#{element['uid']}_img' id='#{element['id']}_img' left='#{element['left']}' top='#{element['top']}' width='#{element['width']}' height='#{element['height']}' alt='Background Image'/&gt;&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">inner_html</span>
327:                         <span class="ruby-keyword kw">end</span>
328:                 <span class="ruby-keyword kw">end</span>
329:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
330:                         <span class="ruby-identifier">element</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
331:                                 <span class="ruby-identifier">fix_no_explicit_nodes</span>(<span class="ruby-identifier">child</span>)
332:                         <span class="ruby-keyword kw">end</span>
333:                 <span class="ruby-keyword kw">end</span>
334:         <span class="ruby-keyword kw">end</span>
335: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="footer-method" class="method-detail ">
				<a name="method-i-footer"></a>

				<div class="method-heading">
				
					<span class="method-name">footer</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="footer-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 465</span>
465: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">footer</span>
466: <span class="ruby-identifier">svg</span> = <span class="ruby-value str">&quot;&quot;</span>
467: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='0' y='#{$document.height+20}'&gt;URL: #{$document.url}&lt;/text&gt;&quot;</span>
468: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='0' y='#{$document.height+50}'&gt;COMMENTS:&lt;/text&gt;&quot;</span>
469: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;line x1='#{0}' y1='#{$document.height+60}' x2='#{$document.width}' y2='#{$document.height+60}' style='stroke:rgb(0,0,0)'/&gt;&quot;</span>
470: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;line x1='#{0}' y1='#{$document.height+80}' x2='#{$document.width}' y2='#{$document.height+80}' style='stroke:rgb(0,0,0)'/&gt;&quot;</span>
471: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;line x1='#{0}' y1='#{$document.height+100}' x2='#{$document.width}' y2='#{$document.height+100}' style='stroke:rgb(0,0,0)'/&gt;&quot;</span>
472: 
473: 
474: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='0' y='#{$document.height+120}'&gt;RATING:&lt;/text&gt;&quot;</span>
475: 
476: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='200' y='#{$document.height+130}' style='font-size:24'&gt;1&lt;/text&gt;&quot;</span>
477: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;circle cx='230' cy='#{$document.height+120}' r='10' style='fill:white;stroke:black'/&gt;&quot;</span>
478: 
479: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='250' y='#{$document.height+130}' style='font-size:24'&gt;2&lt;/text&gt;&quot;</span>
480: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;circle cx='280' cy='#{$document.height+120}' r='10' style='fill:white;stroke:black'/&gt;&quot;</span>
481: 
482: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='300' y='#{$document.height+130}' style='font-size:24'&gt;3&lt;/text&gt;&quot;</span>
483: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;circle cx='330' cy='#{$document.height+120}' r='10' style='fill:white;stroke:black'/&gt;&quot;</span>
484: 
485: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='350' y='#{$document.height+130}' style='font-size:24'&gt;4&lt;/text&gt;&quot;</span>
486: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;circle cx='380' cy='#{$document.height+120}' r='10' style='fill:white;stroke:black'/&gt;&quot;</span>
487: 
488: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='400' y='#{$document.height+130}' style='font-size:24'&gt;5&lt;/text&gt;&quot;</span>
489: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;circle cx='430' cy='#{$document.height+120}' r='10' style='fill:white;stroke:black'/&gt;&quot;</span>
490: 
491: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='0' y='#{$document.height+150}' style='font-size:24'&gt;PDoC = #{$pdoc}&lt;/text&gt;&quot;</span>
492: 
493: <span class="ruby-identifier">svg</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;text x='0' y='#{$document.height+180}' style='font-size:24'&gt;Internal Reference: #{$target_path.gsub('/var/www/vseg/pages/','').gsub('/',' ')} &lt;/text&gt;&quot;</span>
494: 
495: <span class="ruby-identifier">svg</span>
496: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-domain-method" class="method-detail ">
				<a name="method-i-get_domain"></a>

				<div class="method-heading">
				
					<span class="method-name">get_domain</span><span
						class="method-args">(url)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-domain-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_domain</span>(<span class="ruby-identifier">url</span>)
54:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">remove_extra_paths</span>(<span class="ruby-identifier">url</span>)
55:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-new-composite-block-method" class="method-detail ">
				<a name="method-i-get_new_composite_block"></a>

				<div class="method-heading">
				
					<span class="method-name">get_new_composite_block</span><span
						class="method-args">(parent)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="get-new-composite-block-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 498</span>
498: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_new_composite_block</span>(<span class="ruby-identifier">parent</span>)
499:         <span class="ruby-identifier">nb</span> = <span class="ruby-constant">CompositeBlock</span>.<span class="ruby-identifier">new</span>
500:         <span class="ruby-identifier">$next_block_id</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
501:         <span class="ruby-identifier">nb</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">$next_block_id</span>
502:         <span class="ruby-identifier">nb</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-identifier">parent</span>
503:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$debug</span>
504:                 <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;create new block #{nb.id}&quot;</span>
505:         <span class="ruby-keyword kw">end</span>
506: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="has-children--method" class="method-detail ">
				<a name="method-i-has_children%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">has_children?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="has-children--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 144</span>
144: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_children?</span>(<span class="ruby-identifier">node</span>)
145:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
146:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
147:                         <span class="ruby-keyword kw">return</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>
148:                 <span class="ruby-keyword kw">else</span>
149:                         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
150:                 <span class="ruby-keyword kw">end</span>
151:         <span class="ruby-keyword kw">else</span>
152:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
153:         <span class="ruby-keyword kw">end</span>
154: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="help-method" class="method-detail ">
				<a name="method-i-help"></a>

				<div class="method-heading">
				
					<span class="method-name">help</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="help-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 220</span>
220: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>
221:         <span class="ruby-identifier">usage</span>
222:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;This tool is oriented to separate web pages into segments called blocks, based on the structural and visual properties&quot;</span>
223: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="help-method" class="method-detail ">
				<a name="method-i-help"></a>

				<div class="method-heading">
				
					<span class="method-name">help</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="help-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 52</span>
52: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>
53:         <span class="ruby-identifier">usage</span>
54:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;This tool aims to have a HTML document with the visual cues integrated, called Decorated HTML. This allows to save the state of a browser at the moment of capture&quot;</span>
55:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Browsers code are the same as defined in selenium. For instance:&quot;</span>
56:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - firefox&quot;</span>
57:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - chrome&quot;</span>
58:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - iexploreproxy&quot;</span>
59:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - safariproxy&quot;</span>
60:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - opera&quot;</span>
61:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;&quot;</span>
62:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Note: the browser should be installed in your machine to work with selenium webdriver&quot;</span>
63:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;&quot;</span>
64:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;The output is sent to 'out' folder. If it doesn't exists it will be created&quot;</span>
65:         
66: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="help-method" class="method-detail ">
				<a name="method-i-help"></a>

				<div class="method-heading">
				
					<span class="method-name">help</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="help-source">
<pre>
    <span class="ruby-comment cmt"># File pagelyzer, line 39</span>
39: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>
40:         <span class="ruby-identifier">usage</span>
41:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;This tool aims to be an interface to pagelyzer suite&quot;</span>
42:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Help:&quot;</span>
43:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Available commands are:&quot;</span>
44:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - capture&quot;</span>
45:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - analyzer&quot;</span>
46:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - change_detection&quot;</span>
47:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;&quot;</span>
48:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;To have information on the usage of each command use: ./pagelyzer &lt;command&gt; --help &quot;</span>
49:         <span class="ruby-identifier">puts</span>
50: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="help-method" class="method-detail ">
				<a name="method-i-help"></a>

				<div class="method-heading">
				
					<span class="method-name">help</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="help-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 43</span>
43: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>
44:         <span class="ruby-identifier">usage</span>
45:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;This tool aims integrates all the change detection and segmentation tools&quot;</span>
46:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Help:&quot;</span>
47:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; type = hybrid | webshot\n&quot;</span>
48:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Browsers code are the same as defined in selenium. For instance:&quot;</span>
49:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - firefox&quot;</span>
50:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - chrome&quot;</span>
51:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - iexploreproxy&quot;</span>
52:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - safariproxy&quot;</span>
53:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot; - opera&quot;</span>
54:         <span class="ruby-identifier">puts</span>
55: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="hyperlink--method" class="method-detail ">
				<a name="method-i-hyperlink%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">hyperlink?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="hyperlink--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 210</span>
210: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hyperlink?</span>(<span class="ruby-identifier">node</span>)
211: <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'A'</span>
212: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="image--method" class="method-detail ">
				<a name="method-i-image%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">image?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="image--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 170</span>
170: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">image?</span>(<span class="ruby-identifier">node</span>)
171:         [<span class="ruby-value str">'IMG'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
172: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="image--method" class="method-detail ">
				<a name="method-i-image%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">image?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="image--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 214</span>
214: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">image?</span>(<span class="ruby-identifier">node</span>)
215: <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'IMG'</span>
216: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="inline--method" class="method-detail ">
				<a name="method-i-inline%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">inline?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="inline--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 174</span>
174: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inline?</span>(<span class="ruby-identifier">node</span>)
175:         [<span class="ruby-value str">'SUP'</span>,<span class="ruby-value str">'LI'</span>,<span class="ruby-value str">'B'</span>,<span class="ruby-value str">'I'</span>,<span class="ruby-value str">'BIG'</span>,<span class="ruby-value str">'EM'</span>,<span class="ruby-value str">'FONT'</span>,<span class="ruby-value str">'STRONG'</span>,<span class="ruby-value str">'U'</span>,<span class="ruby-value str">'IMG'</span>,<span class="ruby-value str">'A'</span>,<span class="ruby-value str">'INPUT'</span>,<span class="ruby-value str">'CODE'</span>,<span class="ruby-value str">'EM'</span>,<span class="ruby-value str">'CODE'</span>,<span class="ruby-value str">'SPAN'</span>,<span class="ruby-value str">'BUTTON'</span>,<span class="ruby-value str">'DD'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
176: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="invalid--method" class="method-detail ">
				<a name="method-i-invalid%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">invalid?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="invalid--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 80</span>
80: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">invalid?</span>(<span class="ruby-identifier">node</span>)
81:         <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
82:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span> <span class="ruby-identifier">node</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
83:                 <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">comment?</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">doctype?</span> <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)
84:         <span class="ruby-keyword kw">end</span>
85:         <span class="ruby-identifier">ret</span>
86: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="is-image--method" class="method-detail ">
				<a name="method-i-is_image%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">is_image?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="is-image--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 399</span>
399: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_image?</span>(<span class="ruby-identifier">node</span>)
400:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'img'</span>
401: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="line-break--method" class="method-detail ">
				<a name="method-i-line_break%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">line_break?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="line-break--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 178</span>
178: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">line_break?</span>(<span class="ruby-identifier">node</span>)
179:         <span class="ruby-operator">!</span><span class="ruby-identifier">inline?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
180: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="link-text-len-method" class="method-detail ">
				<a name="method-i-link_text_len"></a>

				<div class="method-heading">
				
					<span class="method-name">link_text_len</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="link-text-len-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 434</span>
434: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">link_text_len</span>(<span class="ruby-identifier">node</span>)
435:         <span class="ruby-identifier">tl</span> = <span class="ruby-value">0</span>
436:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
437:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
438:                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
439:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">lowercase</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'a'</span>
440:                                         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">child</span>[<span class="ruby-value str">'alt'</span>].<span class="ruby-identifier">nil?</span>
441:                                                 <span class="ruby-identifier">tl</span><span class="ruby-operator">+=</span><span class="ruby-identifier">child</span>[<span class="ruby-value str">'alt'</span>].<span class="ruby-identifier">size</span>
442:                                         <span class="ruby-keyword kw">end</span>
443:                                 <span class="ruby-keyword kw">else</span>
444:                                         <span class="ruby-identifier">tl</span><span class="ruby-operator">+=</span><span class="ruby-identifier">link_text_len</span>(<span class="ruby-identifier">child</span>)
445:                                 <span class="ruby-keyword kw">end</span>
446:                         <span class="ruby-keyword kw">end</span>
447:                 <span class="ruby-keyword kw">end</span>
448:         <span class="ruby-keyword kw">end</span>
449:         <span class="ruby-identifier">tl</span>
450: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="load-method" class="method-detail ">
				<a name="method-i-load"></a>

				<div class="method-heading">
				
					<span class="method-name">load</span><span
						class="method-args">(source_file,job_id)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="load-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 4</span>
 4: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load</span>(<span class="ruby-identifier">source_file</span>,<span class="ruby-identifier">job_id</span>)
 5:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-node">&quot;#{source_file}&quot;</span>
 6:                 <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;File '#{source_file}' not found&quot;</span>
 7:                 <span class="ruby-identifier">exit</span>
 8:         <span class="ruby-keyword kw">else</span>
 9:                 <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">open</span>(<span class="ruby-node">&quot;#{source_file}&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value">:fixup_tags</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>) }
10:         <span class="ruby-keyword kw">end</span>
11:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;//comment()[1]&quot;</span>).<span class="ruby-identifier">content</span>)
12:         <span class="ruby-identifier">$window</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'window'</span>][<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_i</span>
13:         <span class="ruby-identifier">$window</span>.<span class="ruby-identifier">height</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'window'</span>][<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_i</span>
14:         
15:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;//comment()[2]&quot;</span>).<span class="ruby-identifier">content</span>) 
16:         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'document'</span>][<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_i</span>
17:         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">height</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'document'</span>][<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_i</span>
18:         <span class="ruby-identifier">$document_area</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_f</span> * <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span>
19:         
20:         <span class="ruby-identifier">data</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;//comment()[3]&quot;</span>).<span class="ruby-identifier">content</span>) 
21:         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">url</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'page'</span>][<span class="ruby-value str">'url'</span>].<span class="ruby-identifier">to_s</span>
22:         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">date</span> = <span class="ruby-identifier">data</span>[<span class="ruby-value str">'page'</span>][<span class="ruby-value str">'date'</span>].<span class="ruby-identifier">to_s</span>
23:         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">title</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//title'</span>).<span class="ruby-identifier">inner_text</span>.<span class="ruby-identifier">strip</span>
24: 
25:         <span class="ruby-comment cmt">#cleaning up whitespaces and useless tags</span>
26:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//text()&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
27:                 <span class="ruby-keyword kw">begin</span>
28:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">inner_text</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
29:                                 <span class="ruby-identifier">t</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">t</span>)
30:                         <span class="ruby-keyword kw">end</span>
31:                 <span class="ruby-keyword kw">rescue</span>
32:                         
33:                 <span class="ruby-keyword kw">end</span>
34:         <span class="ruby-keyword kw">end</span>
35: 
36:         (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;script&quot;</span>).<span class="ruby-identifier">remove</span>
37:         (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;style&quot;</span>).<span class="ruby-identifier">remove</span>
38:         (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;meta&quot;</span>).<span class="ruby-identifier">remove</span>
39:         (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;iframe&quot;</span>).<span class="ruby-identifier">remove</span>
40:         (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;noscript&quot;</span>).<span class="ruby-identifier">remove</span>
41: 
42:         <span class="ruby-identifier">doc</span>
43: 
44: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="make-absolute-method" class="method-detail ">
				<a name="method-i-make_absolute"></a>

				<div class="method-heading">
				
					<span class="method-name">make_absolute</span><span
						class="method-args">(potential_base, relative_url)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="make-absolute-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_absolute</span>(<span class="ruby-identifier">potential_base</span>, <span class="ruby-identifier">relative_url</span>)
40:     <span class="ruby-identifier">absolute_url</span> = <span class="ruby-keyword kw">nil</span>;
41:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">relative_url</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/^\//</span>)
42:       <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">create_absolute_url_from_base</span>(<span class="ruby-identifier">potential_base</span>, <span class="ruby-identifier">relative_url</span>)
43:     <span class="ruby-keyword kw">else</span>
44:       <span class="ruby-identifier">absolute_url</span> = <span class="ruby-identifier">create_absolute_url_from_context</span>(<span class="ruby-identifier">potential_base</span>, <span class="ruby-identifier">relative_url</span>)
45:     <span class="ruby-keyword kw">end</span>
46:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">absolute_url</span>
47:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="malformed--method" class="method-detail ">
				<a name="method-i-malformed%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">malformed?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="malformed--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 76</span>
76: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
77:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">BogusETag</span>
78: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="mark-block-method" class="method-detail ">
				<a name="method-i-mark_block"></a>

				<div class="method-heading">
				
					<span class="method-name">mark_block</span><span
						class="method-args">(node,doc)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="mark-block-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 272</span>
272: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mark_block</span>(<span class="ruby-identifier">node</span>,<span class="ruby-identifier">doc</span>)
273: <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set_attribute</span> <span class="ruby-value str">&quot;block&quot;</span>,<span class="ruby-node">&quot;#{doc}&quot;</span>
274: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="mark-node-method" class="method-detail ">
				<a name="method-i-mark_node"></a>

				<div class="method-heading">
				
					<span class="method-name">mark_node</span><span
						class="method-args">(node,doc,rule)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="mark-node-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 267</span>
267: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mark_node</span>(<span class="ruby-identifier">node</span>,<span class="ruby-identifier">doc</span>,<span class="ruby-identifier">rule</span>)
268: <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set_attribute</span> <span class="ruby-value str">&quot;candidate&quot;</span>,<span class="ruby-node">&quot;#{doc}&quot;</span>
269: <span class="ruby-identifier">node</span>.<span class="ruby-identifier">set_attribute</span> <span class="ruby-value str">&quot;rule&quot;</span>,<span class="ruby-node">&quot;#{rule}&quot;</span>
270: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="normalize-method" class="method-detail ">
				<a name="method-i-normalize"></a>

				<div class="method-heading">
				
					<span class="method-name">normalize</span><span
						class="method-args">(str)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="normalize-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 46</span>
46: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize</span>(<span class="ruby-identifier">str</span>)
47:         <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">str</span>)
48:     <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;http://&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">str</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span>
49: 
50:     <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'http'</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> <span class="ruby-operator">!=</span> <span class="ruby-value str">'https'</span>)
51:         <span class="ruby-comment cmt"># more complaining about bad input</span>
52:     <span class="ruby-keyword kw">else</span>
53:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">uri</span>
54:     <span class="ruby-keyword kw">end</span>
55: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="normalize--method" class="method-detail ">
				<a name="method-i-normalize_DOM"></a>

				<div class="method-heading">
				
					<span class="method-name">normalize_DOM</span><span
						class="method-args">(element)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="normalize--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 357</span>
357: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">normalize_DOM</span>(<span class="ruby-identifier">element</span>)
358:         <span class="ruby-identifier">element</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/&quot;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
359:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span>
360:                         <span class="ruby-identifier">fix_children_dimension</span>(<span class="ruby-identifier">e</span>)
361:                         
362:                         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">width</span> = <span class="ruby-identifier">element</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'left'</span>].<span class="ruby-identifier">to_f</span>
363:                         <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">height</span> = <span class="ruby-identifier">element</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">element</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//body'</span>)[<span class="ruby-value str">'top'</span>].<span class="ruby-identifier">to_f</span>
364:                         <span class="ruby-identifier">$document_area</span> = <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">width</span> * <span class="ruby-identifier">$document</span>.<span class="ruby-identifier">height</span>
365:                         
366:                         <span class="ruby-identifier">fix_no_explicit_nodes</span>(<span class="ruby-identifier">e</span>)
367:                         <span class="ruby-identifier">change_relative_url</span>(<span class="ruby-identifier">e</span>)
368:                 <span class="ruby-keyword kw">end</span>
369:         <span class="ruby-keyword kw">end</span>
370: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parent-children-cleanup-method" class="method-detail ">
				<a name="method-i-parent_children_cleanup"></a>

				<div class="method-heading">
				
					<span class="method-name">parent_children_cleanup</span><span
						class="method-args">(children,new_parent)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parent-children-cleanup-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 452</span>
452: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parent_children_cleanup</span>(<span class="ruby-identifier">children</span>,<span class="ruby-identifier">new_parent</span>)
453:         <span class="ruby-identifier">to_del</span> = []
454:         <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
455:                 <span class="ruby-identifier">parent_children_cleanup</span>(<span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>,<span class="ruby-identifier">child</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span><span class="ruby-operator">==</span>[]
456:                 <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;cleanup child_id:#{child.id} parent_id:#{child.parent.id} current_block_id:#{new_parent.id}&quot;</span>  <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$debug</span>
457:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">parent</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">new_parent</span>.<span class="ruby-identifier">id</span>
458:                         <span class="ruby-identifier">to_del</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">child</span>
459:                 <span class="ruby-keyword kw">end</span>
460:         <span class="ruby-keyword kw">end</span>
461:         <span class="ruby-identifier">to_del</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">children</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">b</span>)}
462: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="partial-valid--method" class="method-detail ">
				<a name="method-i-partial_valid%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">partial_valid?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="partial-valid--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 88</span>
88: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">partial_valid?</span>(<span class="ruby-identifier">node</span>)
89:         [<span class="ruby-value str">'FORM'</span>,<span class="ruby-value str">'HEAD'</span>,<span class="ruby-value str">'TABLE'</span>,<span class="ruby-value str">'DD'</span>,<span class="ruby-value str">'DT'</span>,<span class="ruby-value str">'UL'</span>,<span class="ruby-value str">'LI'</span>,<span class="ruby-value str">'DL'</span>,<span class="ruby-value str">'BLOCKQUOTE'</span>,<span class="ruby-value str">'DIV'</span>,<span class="ruby-value str">'BODY'</span>,<span class="ruby-value str">'P'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
90: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="process-node-method" class="method-detail ">
				<a name="method-i-process_node"></a>

				<div class="method-heading">
				
					<span class="method-name">process_node</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="process-node-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 77</span>
77: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_node</span>(<span class="ruby-identifier">node</span>)
78:         <span class="ruby-identifier">rule_used</span> = <span class="ruby-keyword kw">nil</span>
79:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>[<span class="ruby-value str">'candidate'</span>].<span class="ruby-identifier">nil?</span>
80:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid?</span>(<span class="ruby-identifier">node</span>)
81:                         <span class="ruby-identifier">$heuristics</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span><span class="ruby-operator">|</span>
82:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">node</span>)
83:                                         <span class="ruby-identifier">rule_used</span> = <span class="ruby-identifier">h</span>
84:                                         <span class="ruby-keyword kw">break</span> 
85:                                 <span class="ruby-keyword kw">end</span>
86:                         <span class="ruby-keyword kw">end</span>
87:                 <span class="ruby-keyword kw">end</span>
88:         <span class="ruby-keyword kw">else</span>
89:                 <span class="ruby-identifier">ind</span>=<span class="ruby-identifier">$heuristics</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">name</span>}.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value str">'rule'</span>]) 
90:                 <span class="ruby-identifier">$heuristics</span>[<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">action</span> = <span class="ruby-constant">Action</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'extract'</span>,<span class="ruby-identifier">$heuristics</span>[<span class="ruby-identifier">ind</span>].<span class="ruby-identifier">weight</span>)
91:                 <span class="ruby-identifier">rule_used</span> = <span class="ruby-identifier">$heuristics</span>[<span class="ruby-identifier">ind</span>]
92:         <span class="ruby-keyword kw">end</span>
93:         <span class="ruby-identifier">rule_used</span> 
94: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="relative--method" class="method-detail ">
				<a name="method-i-relative%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">relative?</span><span
						class="method-args">(url)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Andrs Sanoja UPMC - LIP6
</p>
<p>
url_utils.rb
</p>
<p>
Requires: Ruby 1.9.1+ (1.8.x versions won&#8217;t work) and rubygems 1.3.7+
</p>
<p>
Copyright (C) 2011, 2012 Andrs Sanoja, Universit Pierre et Marie Curie -
Laboratoire d&#8217;informatique de Paris 6 (LIP6)
</p>
<p>
Contributors: Stephane Ganarski - LIP6
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at your
option) any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License
for more details.
</p>
<p>
You should have received a copy of the GNU Lesser General Public License
along with this program. If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<p>
methods for relative -> absolute URL processing
</p>
					

					
					<div class="method-source-code"
						id="relative--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative?</span>(<span class="ruby-identifier">url</span>)
33:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">url</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/^http/</span>)
34:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
35:     <span class="ruby-keyword kw">end</span>
36:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
37:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="relative-area-method" class="method-detail ">
				<a name="method-i-relative_area"></a>

				<div class="method-heading">
				
					<span class="method-name">relative_area</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="relative-area-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 508</span>
508: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative_area</span>(<span class="ruby-identifier">node</span>)
509: <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">area</span>(<span class="ruby-identifier">node</span>)<span class="ruby-operator">/</span><span class="ruby-identifier">$document_area</span>)
510: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-extra-paths-method" class="method-detail ">
				<a name="method-i-remove_extra_paths"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_extra_paths</span><span
						class="method-args">(potential_base)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-extra-paths-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 62</span>
62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_extra_paths</span>(<span class="ruby-identifier">potential_base</span>)
63:     <span class="ruby-identifier">index_to_start_slash_search</span> = <span class="ruby-identifier">potential_base</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'://'</span>)<span class="ruby-operator">+</span><span class="ruby-value">3</span>
64:     <span class="ruby-identifier">index_of_first_relevant_slash</span> = <span class="ruby-identifier">potential_base</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">index_to_start_slash_search</span>)
65:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">index_of_first_relevant_slash</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
66:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">potential_base</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">index_of_first_relevant_slash</span>]
67:     <span class="ruby-keyword kw">end</span>
68:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">potential_base</span>
69:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-slash-method" class="method-detail ">
				<a name="method-i-remove_slash"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_slash</span><span
						class="method-args">(path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-slash-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 87</span>
87: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_slash</span>(<span class="ruby-identifier">path</span>)
88:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/(\/)+$/</span>,<span class="ruby-value str">''</span>)
89: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="remove-slash-method" class="method-detail ">
				<a name="method-i-remove_slash"></a>

				<div class="method-heading">
				
					<span class="method-name">remove_slash</span><span
						class="method-args">(path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="remove-slash-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 70</span>
70: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_slash</span>(<span class="ruby-identifier">path</span>)
71:         <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/(\/)+$/</span>,<span class="ruby-value str">''</span>)
72: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rgb-hex-method" class="method-detail ">
				<a name="method-i-rgb2hex"></a>

				<div class="method-heading">
				
					<span class="method-name">rgb2hex</span><span
						class="method-args">(color)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rgb-hex-source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 57</span>
57: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rgb2hex</span>(<span class="ruby-identifier">color</span>)
58:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">color</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;rgba(0, 0, 0, 0)&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">color</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;transparent&quot;</span>
59:                 <span class="ruby-keyword kw">return</span> <span class="ruby-node">&quot;#FFFFFF&quot;</span>
60:         <span class="ruby-keyword kw">else</span>
61:                 <span class="ruby-identifier">color</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^rgb(a)?\(([0-9]+),\s*([0-9]+),\s*([0-9]+)(,\s*([0-9]+(\.[0-9]+)))?\)$/</span>
62:                 <span class="ruby-identifier">r</span>,<span class="ruby-identifier">g</span>,<span class="ruby-identifier">b</span> = <span class="ruby-node">$2</span>,<span class="ruby-node">$3</span>,<span class="ruby-node">$4</span>,<span class="ruby-node">$6</span>
63:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
64:                         <span class="ruby-identifier">r</span> = <span class="ruby-value">255</span>
65:                         <span class="ruby-identifier">g</span> = <span class="ruby-value">255</span>
66:                         <span class="ruby-identifier">b</span> = <span class="ruby-value">255</span>
67:                 <span class="ruby-keyword kw">end</span>
68:                 <span class="ruby-keyword kw">return</span> <span class="ruby-value str">'#'</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">r</span>, <span class="ruby-identifier">g</span>, <span class="ruby-identifier">b</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">'0'</span>).<span class="ruby-identifier">upcase</span>}.<span class="ruby-identifier">join</span>
69:         <span class="ruby-keyword kw">end</span>
70: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="save-image-method" class="method-detail ">
				<a name="method-i-save_image"></a>

				<div class="method-heading">
				
					<span class="method-name">save_image</span><span
						class="method-args">(filename,content)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="save-image-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 42</span>
42: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_image</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-identifier">content</span>)
43:         <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>,<span class="ruby-value str">'wb'</span>)
44:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">content</span>))
45:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
46: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="sum-weights-method" class="method-detail ">
				<a name="method-i-sum_weights"></a>

				<div class="method-heading">
				
					<span class="method-name">sum_weights</span><span
						class="method-args">(a,b)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="sum-weights-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 221</span>
221: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sum_weights</span>(<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>)
222:         <span class="ruby-identifier">ret</span>=<span class="ruby-value">0</span>
223:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Elem</span>
224:                 <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">a</span>[<span class="ruby-value str">'weight'</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span>[<span class="ruby-value str">'weight'</span>].<span class="ruby-identifier">to_f</span>
225:         <span class="ruby-keyword kw">end</span>
226:         <span class="ruby-identifier">ret</span>
227: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="tag-based-weight-method" class="method-detail ">
				<a name="method-i-tag_based_weight"></a>

				<div class="method-heading">
				
					<span class="method-name">tag_based_weight</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="tag-based-weight-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 512</span>
512: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tag_based_weight</span>(<span class="ruby-identifier">node</span>)
513:         <span class="ruby-identifier">w</span> = <span class="ruby-value">0</span>
514:         <span class="ruby-identifier">w</span> = <span class="ruby-value">4</span> <span class="ruby-keyword kw">if</span> [<span class="ruby-value str">'BODY'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
515:         <span class="ruby-identifier">w</span> = <span class="ruby-value">6</span> <span class="ruby-keyword kw">if</span> [<span class="ruby-value str">'DL'</span>,<span class="ruby-value str">'UL'</span>,<span class="ruby-value str">'DIV'</span>,<span class="ruby-value str">'TABLE'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
516:         <span class="ruby-identifier">w</span> = <span class="ruby-value">9</span> <span class="ruby-keyword kw">if</span> [<span class="ruby-value str">'P'</span>,<span class="ruby-value str">'H1'</span>,<span class="ruby-value str">'LI'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
517:         <span class="ruby-identifier">w</span>
518: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="text--method" class="method-detail ">
				<a name="method-i-text%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">text?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="text--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 72</span>
72: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
73:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span>
74: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="text-len-method" class="method-detail ">
				<a name="method-i-text_len"></a>

				<div class="method-heading">
				
					<span class="method-name">text_len</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="text-len-source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 418</span>
418: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">text_len</span>(<span class="ruby-identifier">node</span>)
419:         <span class="ruby-identifier">tl</span> = <span class="ruby-value">0</span>
420:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>) <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
421:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
422:                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
423:                                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">child</span>)
424:                                         <span class="ruby-identifier">tl</span><span class="ruby-operator">+=</span><span class="ruby-identifier">child</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">size</span>
425:                                 <span class="ruby-keyword kw">else</span>
426:                                         <span class="ruby-identifier">tl</span><span class="ruby-operator">+=</span><span class="ruby-identifier">text_len</span>(<span class="ruby-identifier">child</span>)
427:                                 <span class="ruby-keyword kw">end</span>
428:                         <span class="ruby-keyword kw">end</span>
429:                 <span class="ruby-keyword kw">end</span>
430:         <span class="ruby-keyword kw">end</span>
431:         <span class="ruby-identifier">tl</span>
432: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-xml-method" class="method-detail ">
				<a name="method-i-to_xml"></a>

				<div class="method-heading">
				
					<span class="method-name">to_xml</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="to-xml-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 209</span>
209: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_xml</span>
210: <span class="ruby-identifier">src</span> = <span class="ruby-value str">&quot;&quot;</span>
211: <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;iso-8859-1\&quot; standalone=\&quot;yes\&quot; ?&gt;\n&quot;</span>
212: <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;XML&gt;\n&quot;</span>
213:         <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;&lt;Document url=\&quot;#{escape_html($document.url)}\&quot; Title=\&quot;#{escape_html($document.title)}\&quot; Version=\&quot;#{$version}\&quot; Pos=\&quot;WindowWidth||PageRectLeft:#{$document.width} WindowHeight||PageRectTop:#{$document.height} ObjectRectWith:0 ObjectRectHeight:0\&quot;&gt;\n&quot;</span>
214:                 <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">$root</span>.<span class="ruby-identifier">to_xml</span>
215:         <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;/Document&gt;\n&quot;</span>
216: <span class="ruby-identifier">src</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;/XML&gt;\n&quot;</span>
217: <span class="ruby-identifier">src</span> 
218: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="undesirable-node--method" class="method-detail ">
				<a name="method-i-undesirable_node%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">undesirable_node?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="undesirable-node--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 182</span>
182: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">undesirable_node?</span>(<span class="ruby-identifier">node</span>)
183:         [<span class="ruby-value str">'SCRIPT'</span>,<span class="ruby-value str">'STYLE'</span>,<span class="ruby-value str">'MAP'</span>,<span class="ruby-value str">'LABEL'</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">upcase</span>
184: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="urls-on-same-domain--method" class="method-detail ">
				<a name="method-i-urls_on_same_domain%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">urls_on_same_domain?</span><span
						class="method-args">(url1, url2)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="urls-on-same-domain--source">
<pre>
    <span class="ruby-comment cmt"># File lib/pagelyzer_url_utils.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">urls_on_same_domain?</span>(<span class="ruby-identifier">url1</span>, <span class="ruby-identifier">url2</span>)
50:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">get_domain</span>(<span class="ruby-identifier">url1</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">get_domain</span>(<span class="ruby-identifier">url2</span>)
51:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="method-i-usage"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 48</span>
48: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
49:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;USAGE: pagelyzer_capture --url=URL [--js_files_url=BASE_URL] [--output-folder=FOLDER] [--browser=BROWSER_CODE] [--thumbnail] [--help]&quot;</span>
50: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="method-i-usage"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Andrs Sanoja UPMC - LIP6
</p>
<p>
pagelyzer 
</p>
<p>
Requires: Ruby 1.9.1+ (1.8.x versions won&#8217;t work), rubygems 1.3.7+
and Hpricot gem v=0.8.6
</p>
<p>
Copyright (C) 2011, 2012 Andrs Sanoja, Universit Pierre et Marie Curie -
Laboratoire d&#8217;informatique de Paris 6 (LIP6)
</p>
<p>
Contributors: Stephane Ganarski - LIP6
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at your
option) any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License
for more details.
</p>
<p>
You should have received a copy of the GNU Lesser General Public License
along with this program. If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
    <span class="ruby-comment cmt"># File pagelyzer, line 31</span>
31: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
32:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;USAGE: pagelyzer [--help|--version] [&lt;command&gt; &lt;command_options&gt;]&quot;</span>
33: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="method-i-usage"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
     <span class="ruby-comment cmt"># File bin/pagelyzer_analyzer, line 225</span>
225: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
226:         <span class="ruby-comment cmt">#puts &quot;USAGE:\nruby pageanalyzer.rb --source-file=FILE [--output-file=FILE] [--pdoc=(0..10)] [--interactive=(yes|no)] [--use-database=(yes|no) [--db-job-id=INT] [--db-browser-id=INT]] [--debug=(yes|no)] [--help]&quot;</span>
227:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;USAGE: pagelyzer_analyzer --decorated-file=FILE [--output-file=FILE] [--pdoc=(0..10)] [--version] [--help]&quot;</span>
228: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="usage-method" class="method-detail ">
				<a name="method-i-usage"></a>

				<div class="method-heading">
				
					<span class="method-name">usage</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="usage-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 39</span>
39: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">usage</span>
40:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;USAGE: pagelyzer_changedetection --url1=URL --url2=URL [--doc=(1..10)] [--output-folder=FOLDER] [--browser=BROWSER_CODE | --browser1=BROWSER_CODE --browser2=BROWSER_CODE] [--verbose] --type=[hybrid|visual]&quot;</span>
41: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="valid--method" class="method-detail ">
				<a name="method-i-valid%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">valid?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="valid--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 92</span>
 92: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">valid?</span>(<span class="ruby-identifier">node</span>)
 93:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
 94:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
 95:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
 96:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
 97:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">undesirable_node?</span>(<span class="ruby-identifier">node</span>)
 98:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
 99:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
100:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">node</span>)
101:         <span class="ruby-keyword kw">else</span>
102:                 <span class="ruby-comment cmt">#puts &quot;#{node.name} #{node.children.size} #{count_reduce(node.children,&quot;visible?&quot;)}&quot;</span>
103:                 <span class="ruby-identifier">vis</span> = <span class="ruby-value">0</span>
104:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">node</span>)
105:                         <span class="ruby-identifier">vis</span>=<span class="ruby-value">0</span>
106:                         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
107:                                 <span class="ruby-identifier">vis</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">c</span>)
108:                         <span class="ruby-keyword kw">end</span>
109:                 <span class="ruby-keyword kw">end</span>
110:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">vis</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
111:         <span class="ruby-keyword kw">end</span>
112: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="verify-data-folder-method" class="method-detail ">
				<a name="method-i-verify_data_folder"></a>

				<div class="method-heading">
				
					<span class="method-name">verify_data_folder</span><span
						class="method-args">(path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="verify-data-folder-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_capture, line 81</span>
81: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verify_data_folder</span>(<span class="ruby-identifier">path</span>)
82:         <span class="ruby-identifier">state</span> = <span class="ruby-keyword kw">true</span>
83:         <span class="ruby-identifier">state</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">path</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;/js/decorate_mini.js&quot;</span>
84:         <span class="ruby-identifier">state</span>
85: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="verify-data-folder-method" class="method-detail ">
				<a name="method-i-verify_data_folder"></a>

				<div class="method-heading">
				
					<span class="method-name">verify_data_folder</span><span
						class="method-args">(path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="verify-data-folder-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 80</span>
80: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verify_data_folder</span>(<span class="ruby-identifier">path</span>)
81:         <span class="ruby-identifier">state</span> = <span class="ruby-keyword kw">true</span>
82:         <span class="ruby-identifier">state</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">path</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;/js/decorate_mini.js&quot;</span>
83:         <span class="ruby-identifier">state</span>
84: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="verify-installation-of-marcalizer-method" class="method-detail ">
				<a name="method-i-verify_installation_of_marcalizer"></a>

				<div class="method-heading">
				
					<span class="method-name">verify_installation_of_marcalizer</span><span
						class="method-args">(path)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="verify-installation-of-marcalizer-source">
<pre>
    <span class="ruby-comment cmt"># File bin/pagelyzer_changedetection, line 74</span>
74: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verify_installation_of_marcalizer</span>(<span class="ruby-identifier">path</span>)
75:         <span class="ruby-identifier">state</span> = <span class="ruby-keyword kw">true</span>
76:         <span class="ruby-identifier">state</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-identifier">path</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;/marcalizer.jar&quot;</span>
77:         <span class="ruby-identifier">state</span>
78: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="version-method" class="method-detail ">
				<a name="method-i-version"></a>

				<div class="method-heading">
				
					<span class="method-name">version</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="version-source">
<pre>
    <span class="ruby-comment cmt"># File pagelyzer, line 35</span>
35: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span>
36:         <span class="ruby-identifier">puts</span> <span class="ruby-value str">&quot;Pagelyzer. Version 0.9&quot;</span>
37: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="virtual-text--method" class="method-detail ">
				<a name="method-i-virtual_text%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">virtual_text?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="virtual-text--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 186</span>
186: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">virtual_text?</span>(<span class="ruby-identifier">node</span>)
187: <span class="ruby-comment cmt">#puts &quot;evaluate virtual text on #{node.name}&quot;</span>
188:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>) 
189:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">inline?</span>(<span class="ruby-identifier">node</span>)
190:                         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">nil?</span>
191:                                 <span class="ruby-identifier">text</span> = <span class="ruby-identifier">count_reduce</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>,<span class="ruby-value str">&quot;text?&quot;</span>)
192:                                 <span class="ruby-identifier">vnodes</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">virtual_text?</span>(<span class="ruby-identifier">c</span>)}.<span class="ruby-identifier">uniq</span>
193:                                 <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">vnodes</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">==</span><span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">vnodes</span>[<span class="ruby-value">0</span>]<span class="ruby-operator">==</span><span class="ruby-keyword kw">true</span> <span class="ruby-comment cmt">#with uniq there should be only one true element for be true the expr. or a false. Two values makes true &amp; false = false</span>
194:                                 <span class="ruby-comment cmt">#puts &quot;VT(#{node.name}) #{vnodes} #{ret}&quot;</span>
195:                                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
196:                         <span class="ruby-keyword kw">else</span>
197:                                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">node</span>)
198:                         <span class="ruby-keyword kw">end</span>
199:                 <span class="ruby-keyword kw">else</span>
200:                         <span class="ruby-comment cmt">#puts &quot;not inline #{node.name}&quot;</span>
201:                         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
202:                 <span class="ruby-keyword kw">end</span>
203:         <span class="ruby-keyword kw">else</span>
204:                 <span class="ruby-comment cmt">#puts &quot;#{node.name} #{malformed?(node)} #{text?(node)}&quot;</span>
205:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
206:         <span class="ruby-keyword kw">end</span>
207: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="visible--method" class="method-detail ">
				<a name="method-i-visible%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">visible?</span><span
						class="method-args">(node)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="visible--source">
<pre>
     <span class="ruby-comment cmt"># File lib/pagelyzer_util.rb, line 114</span>
114: <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visible?</span>(<span class="ruby-identifier">node</span>)
115:         <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
116:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">malformed?</span>(<span class="ruby-identifier">node</span>)
117:                 <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">text?</span>(<span class="ruby-identifier">node</span>)
118:                         <span class="ruby-comment cmt">#puts &quot;#{node.name} #{node.attributes['visibility']} #{node.attributes['display']}&quot;</span>
119:                         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'display'</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;none&quot;</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'visibility'</span>]<span class="ruby-operator">!=</span><span class="ruby-value str">&quot;visible&quot;</span>
120:                                 <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
121:                         <span class="ruby-keyword kw">else</span>
122:                                 <span class="ruby-identifier">ret</span> = (<span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'width'</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'height'</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
123:                         <span class="ruby-keyword kw">end</span>
124:                 <span class="ruby-keyword kw">else</span>
125:                         <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">true</span>
126:                 <span class="ruby-keyword kw">end</span>
127:         <span class="ruby-keyword kw">end</span>
128:         <span class="ruby-comment cmt">#puts ret</span>
129:         <span class="ruby-identifier">ret</span>
130: <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

